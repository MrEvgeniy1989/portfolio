"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[4843],{4843:(t,i,n)=>{n.d(i,{PolygonMaskInstance:()=>c});var e=n(8470),o=n(3227);const s="".concat(e.dI," No polygon data loaded."),a="".concat(e.dI," No polygon found, you need to specify SVG url in config."),r=0,l=0,h=.5;class c{constructor(t,i){this._checkInsidePolygon=t=>{var i,n;const o=this._container,s=o.actualOptions.polygon;if(null===s||void 0===s||!s.enable||"none"===s.type||"inline"===s.type)return!0;if(!this.raw)throw new Error(a);const r=o.canvas.size,l=null!==(i=null===t||void 0===t?void 0:t.x)&&void 0!==i?i:(0,e.G0)()*r.width,h=null!==(n=null===t||void 0===t?void 0:t.y)&&void 0!==n?n:(0,e.G0)()*r.height;let c=!1;for(let e=0,a=this.raw.length-1;e<this.raw.length;a=e++){const t=this.raw[e],i=this.raw[a];t.y>h!==i.y>h&&l<(i.x-t.x)*(h-t.y)/(i.y-t.y)+t.x&&(c=!c)}return"inside"===s.type?c:"outside"===s.type&&!c},this._createPath2D=()=>{var t;if(this._container.actualOptions.polygon&&null!==(t=this.paths)&&void 0!==t&&t.length)for(const e of this.paths){var i,n;const t=null===(i=e.element)||void 0===i?void 0:i.getAttribute("d");if(t){const i=new Path2D(t),n=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),o=new Path2D,s=n.scale(this._scale);o.addPath?(o.addPath(i,s),e.path2d=o):delete e.path2d}else delete e.path2d;if(null!==(n=e.path2d)&&void 0!==n?n:!this.raw)continue;e.path2d=new Path2D;const o=0,s=this.raw[o];e.path2d.moveTo(s.x,s.y),this.raw.forEach(((t,i)=>{var n;i>o&&(null===(n=e.path2d)||void 0===n||n.lineTo(t.x,t.y))})),e.path2d.closePath()}},this._downloadSvgPath=async(t,i)=>{const n=this._container.actualOptions.polygon;if(!n)return;const o=null!==t&&void 0!==t?t:n.url,s=null!==i&&void 0!==i&&i;if(!o||void 0!==this.paths&&!s)return this.raw;const a=await fetch(o);if(!a.ok)throw new Error("".concat(e.dI," occurred during polygon mask download"));return await this._parseSvgPath(await a.text(),i)},this._drawPoints=()=>{if(this.raw)for(const t of this.raw)this._container.particles.addParticle({x:t.x,y:t.y})},this._getEquidistantPointByIndex=t=>{var i,n,e,o,a,h,c,d,u,y;const p=this._container.actualOptions;if(!p.polygon)return;if(null===(i=this.raw)||void 0===i||!i.length||null===(n=this.paths)||void 0===n||!n.length)throw new Error(s);let g,_=0;const v=this.paths.reduce(((t,i)=>t+i.length),0)/p.particles.number.value;for(const s of this.paths){const i=v*t-_;if(i<=s.length){g=s.element.getPointAtLength(i);break}_+=s.length}const w=this._scale;return{x:(null!==(e=null===(o=g)||void 0===o?void 0:o.x)&&void 0!==e?e:r)*w+(null!==(a=null===(h=this.offset)||void 0===h?void 0:h.x)&&void 0!==a?a:r),y:(null!==(c=null===(d=g)||void 0===d?void 0:d.y)&&void 0!==c?c:l)*w+(null!==(u=null===(y=this.offset)||void 0===y?void 0:y.y)&&void 0!==u?u:l)}},this._getPointByIndex=t=>{var i;if(null===(i=this.raw)||void 0===i||!i.length)throw new Error(s);const n=this.raw[t%this.raw.length];return{x:n.x,y:n.y}},this._getRandomPoint=()=>{var t;if(null===(t=this.raw)||void 0===t||!t.length)throw new Error(s);const i=(0,e.Vh)(this.raw);return{x:i.x,y:i.y}},this._getRandomPointByLength=()=>{var t,i,n,o,a,h;if(!this._container.actualOptions.polygon)return;if(null===(t=this.raw)||void 0===t||!t.length||null===(i=this.paths)||void 0===i||!i.length)throw new Error(s);const c=(0,e.Vh)(this.paths),d=Math.floor((0,e.G0)()*c.length)+1,u=c.element.getPointAtLength(d),y=this._scale;return{x:u.x*y+(null!==(n=null===(o=this.offset)||void 0===o?void 0:o.x)&&void 0!==n?n:r),y:u.y*y+(null!==(a=null===(h=this.offset)||void 0===h?void 0:h.y)&&void 0!==a?a:l)}},this._initRawData=async t=>{const i=this._container.actualOptions.polygon;if(i){if(i.url)this.raw=await this._downloadSvgPath(i.url,t);else if(i.data){const n=i.data;let o;if((0,e.Kg)(n))o=n;else{const t=t=>'<path d="'.concat(t,'" />'),i=(0,e.cy)(n.path)?n.path.map(t).join(""):t(n.path);o="<svg ".concat('xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"',' width="').concat(n.size.width,'" height="').concat(n.size.height,'">').concat(i,"</svg>")}this.raw=await this._parseSvgPath(o,t)}this._createPath2D(),this._engine.dispatchEvent("polygonMaskLoaded",{container:this._container})}},this._parseSvgPath=async(t,i)=>{var o,s,a;const r=null!==i&&void 0!==i&&i;if(void 0!==this.paths&&!r)return this.raw;const l=this._container,c=l.actualOptions.polygon;if(!c)return;const d=(new DOMParser).parseFromString(t,"image/svg+xml"),u=d.getElementsByTagName("svg")[0];let y=u.getElementsByTagName("path");y.length||(y=d.getElementsByTagName("path")),this.paths=[];for(let n=0;n<y.length;n++){const t=y.item(n);t&&this.paths.push({element:t,length:t.getTotalLength()})}const p=this._scale;this.dimension.width=parseFloat(null!==(o=u.getAttribute("width"))&&void 0!==o?o:"0")*p,this.dimension.height=parseFloat(null!==(s=u.getAttribute("height"))&&void 0!==s?s:"0")*p;const g=null!==(a=c.position)&&void 0!==a?a:{x:50,y:50},_=l.canvas.size;this.offset={x:_.width*g.x/e.a5-this.dimension.width*h,y:_.height*g.y/e.a5-this.dimension.height*h};const{parsePaths:v}=await Promise.resolve().then(n.bind(n,3227));return v(this.paths,p,this.offset)},this._polygonBounce=(t,i,n)=>{const s=this._container.actualOptions.polygon;if(!this.raw||null===s||void 0===s||!s.enable||"top"!==n)return!1;if("inside"===s.type||"outside"===s.type){let i,n,s;const a=t.getPosition(),r=t.getRadius(),l=1;for(let h=0,c=this.raw.length-l;h<this.raw.length;c=h++){const l=this.raw[h],d=this.raw[c];i=(0,o.v2)(l,d,a);const u=(0,e.vr)(a,i);if([n,s]=[u.dx,u.dy],u.distance<r)return(0,o.I)(l,d,t.velocity),!0}if(i&&void 0!==n&&void 0!==s&&!this._checkInsidePolygon(a)){const n={x:1,y:1},e=2*r,o=-1;return a.x>=i.x&&(n.x=-1),a.y>=i.y&&(n.y=-1),t.position.x=i.x+e*n.x,t.position.y=i.y+e*n.y,t.velocity.mult(o),!0}}else if("inline"===s.type&&t.initialPosition){const i=(0,e.Yf)(t.initialPosition,t.getPosition()),{velocity:n}=t;if(i>this._moveRadius)return n.x=n.y*h-n.x,n.y=n.x*h-n.y,!0}return!1},this._randomPoint=()=>{const t=this._container,i=t.actualOptions.polygon;if(!i)return;let n;if("inline"===i.type)switch(i.inline.arrangement){case"random-point":n=this._getRandomPoint();break;case"random-length":n=this._getRandomPointByLength();break;case"equidistant":n=this._getEquidistantPointByIndex(t.particles.count);break;default:n=this._getPointByIndex(t.particles.count)}else{const i=t.canvas.size;n={x:(0,e.G0)()*i.width,y:(0,e.G0)()*i.height}}return this._checkInsidePolygon(n)?n:this._randomPoint()},this._container=t,this._engine=i,this.dimension={height:0,width:0},this._moveRadius=0,this._scale=1}clickPositionValid(t){const i=this._container.actualOptions.polygon;return!(null===i||void 0===i||!i.enable)&&"none"!==i.type&&"inline"!==i.type&&this._checkInsidePolygon(t)}draw(t){var i;if(null===(i=this.paths)||void 0===i||!i.length)return;const n=this._container.actualOptions.polygon;if(null===n||void 0===n||!n.enable)return;const e=n.draw;if(!e.enable)return;const s=this.raw;for(const a of this.paths){const i=a.path2d;t&&(i&&this.offset?(0,o.Qz)(t,i,e.stroke,this.offset):s&&(0,o.BF)(t,s,e.stroke))}}async init(){const t=this._container,i=t.actualOptions.polygon,n=t.retina.pixelRatio;i&&(this._moveRadius=i.move.radius*n,this._scale=i.scale*n,i.enable&&await this._initRawData())}particleBounce(t,i,n){return this._polygonBounce(t,i,n)}particlePosition(t){var i,n;const o=this._container.actualOptions.polygon;if(null!==o&&void 0!==o&&o.enable&&(null!==(i=null===(n=this.raw)||void 0===n?void 0:n.length)&&void 0!==i?i:0)>0)return(0,e.zw)({},t||this._randomPoint())}particlesInitialization(){const t=this._container.actualOptions.polygon;return!(null===t||void 0===t||!t.enable||"inline"!==t.type||"one-per-point"!==t.inline.arrangement&&"per-point"!==t.inline.arrangement)&&(this._drawPoints(),!0)}resize(){const t=this._container,i=t.actualOptions.polygon;if(null===i||void 0===i||!i.enable||"none"===i.type)return;this.redrawTimeout&&clearTimeout(this.redrawTimeout);this.redrawTimeout=window.setTimeout((()=>{(async()=>{await this._initRawData(!0),await t.particles.redraw()})()}),250)}stop(){delete this.raw,delete this.paths}}},3227:(t,i,n)=>{n.d(i,{BF:()=>r,I:()=>d,Qz:()=>l,parsePaths:()=>h,v2:()=>c});var e=n(8470);const o=2,s={min:0,max:1},a=2;function r(t,i,n){const o=(0,e.BN)(n.color);if(!o)return;const s=i[0];t.beginPath(),t.moveTo(s.x,s.y);for(const e of i)t.lineTo(e.x,e.y);t.closePath(),t.strokeStyle=(0,e.xx)(o),t.lineWidth=n.width,t.stroke()}function l(t,i,n,o){const s=1,a=0,r=0,l=1;t.setTransform(s,a,r,l,o.x,o.y);const h=(0,e.BN)(n.color);h&&(t.strokeStyle=(0,e.xx)(h,n.opacity),t.lineWidth=n.width,t.stroke(i),t.resetTransform())}function h(t,i,n){const e=[];for(const s of t){var o;const t=s.element.pathSegList,a=null!==(o=null===t||void 0===t?void 0:t.numberOfItems)&&void 0!==o?o:0,r={x:0,y:0};for(let o=0;o<a;o++){const s=null===t||void 0===t?void 0:t.getItem(o),a=window.SVGPathSeg;switch(null===s||void 0===s?void 0:s.pathSegType){case a.PATHSEG_MOVETO_ABS:case a.PATHSEG_LINETO_ABS:case a.PATHSEG_CURVETO_CUBIC_ABS:case a.PATHSEG_CURVETO_QUADRATIC_ABS:case a.PATHSEG_ARC_ABS:case a.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:case a.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:{const t=s;r.x=t.x,r.y=t.y;break}case a.PATHSEG_LINETO_HORIZONTAL_ABS:r.x=s.x;break;case a.PATHSEG_LINETO_VERTICAL_ABS:r.y=s.y;break;case a.PATHSEG_LINETO_REL:case a.PATHSEG_MOVETO_REL:case a.PATHSEG_CURVETO_CUBIC_REL:case a.PATHSEG_CURVETO_QUADRATIC_REL:case a.PATHSEG_ARC_REL:case a.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:case a.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:{const t=s;r.x+=t.x,r.y+=t.y;break}case a.PATHSEG_LINETO_HORIZONTAL_REL:r.x+=s.x;break;case a.PATHSEG_LINETO_VERTICAL_REL:r.y+=s.y;break;case a.PATHSEG_UNKNOWN:case a.PATHSEG_CLOSEPATH:continue}e.push({x:r.x*i+n.x,y:r.y*i+n.y})}}return e}function c(t,i,n){const{dx:a,dy:r}=(0,e.vr)(n,t),{dx:l,dy:h}=(0,e.vr)(i,t),c=(a*l+r*h)/(l**o+h**o),d={x:t.x+l*c,y:t.y+h*c,isOnSegment:c>=s.min&&c<=s.max};return c<s.min?(d.x=t.x,d.y=t.y):c>s.max&&(d.x=i.x,d.y=i.y),d}function d(t,i,n){const{dx:o,dy:s}=(0,e.vr)(t,i),r=Math.atan2(s,o),l=e.Mi.create(Math.sin(r),-Math.cos(r)),h=a*(n.x*l.x+n.y*l.y);l.multTo(h),n.subFrom(l)}}}]);
//# sourceMappingURL=4843.fbe8a70f.chunk.js.map